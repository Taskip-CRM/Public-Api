# Contact Management API

The Contact Management API allows you to manage contacts in your TaskIP CRM system. You can create, read, update, and delete contacts, as well as perform bulk operations and client invitations.

## Endpoints Overview

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/public-v1/contact` | Get all contacts |
| `POST` | `/api/public-v1/contact` | Create a new contact |
| `GET` | `/api/public-v1/contact/{id}` | Get a specific contact |
| `PUT` | `/api/public-v1/contact/{id}` | Update a contact |
| `DELETE` | `/api/public-v1/contact/{id}` | Delete a contact |
| `POST` | `/api/public-v1/contact/bulk-delete` | Delete multiple contacts |
| `POST` | `/api/public-v1/contact/invite-client/{id}` | Invite a contact as client |

---

## Get All Contacts

Retrieve a list of all contacts in your system.

```http
GET /api/public-v1/contact
```

### Request Headers
```http
X-Secret-Key: your-secret-key-here
Content-Type: application/json
```

### Query Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `page` | integer | No | Page number for pagination (default: 1) |
| `limit` | integer | No | Number of contacts per page (default: 50) |
| `search` | string | No | Search term for contact name or email |
| `sort` | string | No | Sort field (`name`, `email`, `created_at`) |
| `order` | string | No | Sort order (`asc` or `desc`) |

### Example Request

```bash
curl -X GET "https://public-api.taskip.net/api/public-v1/contact?page=1&limit=20" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json"
```

### Example Response

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "John Doe",
      "email": "john.doe@example.com",
      "phone": "+1-555-0123",
      "company_id": 5,
      "company_name": "Acme Corp",
      "position": "Software Engineer",
      "status": "active",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-20T14:45:00Z"
    },
    {
      "id": 2,
      "name": "Jane Smith",
      "email": "jane.smith@example.com",
      "phone": "+1-555-0124",
      "company_id": 3,
      "company_name": "Tech Solutions",
      "position": "Product Manager",
      "status": "active",
      "created_at": "2024-01-10T09:20:00Z",
      "updated_at": "2024-01-18T16:30:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 150,
    "total_pages": 8
  }
}
```

---

## Create a Contact

Create a new contact in your system.

```http
POST /api/public-v1/contact
```

### Request Headers
```http
X-Secret-Key: your-secret-key-here
Content-Type: application/json
```

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Contact's full name |
| `email` | string | Yes | Contact's email address |
| `phone` | string | No | Contact's phone number |
| `company_id` | integer | No | Associated company ID |
| `position` | string | No | Job position/title |
| `address` | string | No | Contact's address |
| `notes` | string | No | Additional notes |
| `status` | string | No | Contact status (`active`, `inactive`) |

### Example Request

```bash
curl -X POST "https://public-api.taskip.net/api/public-v1/contact" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "phone": "+1-555-0125",
    "company_id": 7,
    "position": "Marketing Director",
    "address": "123 Business Ave, City, State 12345",
    "notes": "Met at industry conference 2024",
    "status": "active"
  }'
```

### JavaScript Example
```javascript
const contactData = {
  name: "Alice Johnson",
  email: "alice.johnson@example.com",
  phone: "+1-555-0125",
  company_id: 7,
  position: "Marketing Director",
  address: "123 Business Ave, City, State 12345",
  notes: "Met at industry conference 2024",
  status: "active"
};

const response = await fetch('https://public-api.taskip.net/api/public-v1/contact', {
  method: 'POST',
  headers: {
    'X-Secret-Key': 'your-secret-key-here',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(contactData)
});

const result = await response.json();
```

### Example Response

```json
{
  "success": true,
  "message": "Contact created successfully",
  "data": {
    "id": 151,
    "name": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "phone": "+1-555-0125",
    "company_id": 7,
    "company_name": "Marketing Pro",
    "position": "Marketing Director",
    "address": "123 Business Ave, City, State 12345",
    "notes": "Met at industry conference 2024",
    "status": "active",
    "created_at": "2024-01-25T11:20:00Z",
    "updated_at": "2024-01-25T11:20:00Z"
  }
}
```

---

## Get a Specific Contact

Retrieve details of a specific contact by ID.

```http
GET /api/public-v1/contact/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Contact ID |

### Example Request

```bash
curl -X GET "https://public-api.taskip.net/api/public-v1/contact/151" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json"
```

### Example Response

```json
{
  "success": true,
  "data": {
    "id": 151,
    "name": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "phone": "+1-555-0125",
    "company_id": 7,
    "company_name": "Marketing Pro",
    "position": "Marketing Director",
    "address": "123 Business Ave, City, State 12345",
    "notes": "Met at industry conference 2024",
    "status": "active",
    "tags": ["lead", "marketing", "conference"],
    "custom_fields": {
      "linkedin": "https://linkedin.com/in/alicejohnson",
      "preferred_contact": "email"
    },
    "created_at": "2024-01-25T11:20:00Z",
    "updated_at": "2024-01-25T11:20:00Z"
  }
}
```

---

## Update a Contact

Update an existing contact's information.

```http
PUT /api/public-v1/contact/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Contact ID to update |

### Request Body
Same fields as create contact. All fields are optional - only include fields you want to update.

### Example Request

```bash
curl -X PUT "https://public-api.taskip.net/api/public-v1/contact/151" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "position": "Senior Marketing Director",
    "phone": "+1-555-0126",
    "notes": "Promoted to senior position. Met at industry conference 2024"
  }'
```

### Python Example
```python
import requests

headers = {
    'X-Secret-Key': 'your-secret-key-here',
    'Content-Type': 'application/json'
}

update_data = {
    "position": "Senior Marketing Director",
    "phone": "+1-555-0126",
    "notes": "Promoted to senior position. Met at industry conference 2024"
}

response = requests.put(
    'https://public-api.taskip.net/api/public-v1/contact/151',
    headers=headers,
    json=update_data
)

result = response.json()
```

### Example Response

```json
{
  "success": true,
  "message": "Contact updated successfully",
  "data": {
    "id": 151,
    "name": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "phone": "+1-555-0126",
    "company_id": 7,
    "company_name": "Marketing Pro",
    "position": "Senior Marketing Director",
    "address": "123 Business Ave, City, State 12345",
    "notes": "Promoted to senior position. Met at industry conference 2024",
    "status": "active",
    "created_at": "2024-01-25T11:20:00Z",
    "updated_at": "2024-01-26T09:15:00Z"
  }
}
```

---

## Delete a Contact

Delete a specific contact from your system.

```http
DELETE /api/public-v1/contact/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Contact ID to delete |

### Example Request

```bash
curl -X DELETE "https://public-api.taskip.net/api/public-v1/contact/151" \
  -H "X-Secret-Key: your-secret-key-here"
```

### Example Response

```json
{
  "success": true,
  "message": "Contact deleted successfully"
}
```

---

## Bulk Delete Contacts

Delete multiple contacts at once.

```http
POST /api/public-v1/contact/bulk-delete
```

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `contact_ids` | array | Yes | Array of contact IDs to delete |

### Example Request

```bash
curl -X POST "https://public-api.taskip.net/api/public-v1/contact/bulk-delete" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "contact_ids": [151, 152, 153, 154]
  }'
```

### Example Response

```json
{
  "success": true,
  "message": "4 contacts deleted successfully",
  "data": {
    "deleted_count": 4,
    "deleted_ids": [151, 152, 153, 154],
    "failed_ids": []
  }
}
```

---

## Invite Client

Send an invitation to a contact to join as a client in your system.

```http
POST /api/public-v1/contact/invite-client/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Contact ID to invite |

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `message` | string | No | Custom invitation message |
| `send_email` | boolean | No | Whether to send email invitation (default: true) |
| `access_level` | string | No | Client access level (`basic`, `standard`, `premium`) |

### Example Request

```bash
curl -X POST "https://public-api.taskip.net/api/public-v1/contact/invite-client/150" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Welcome to our client portal! You now have access to track your projects and invoices.",
    "send_email": true,
    "access_level": "standard"
  }'
```

### Example Response

```json
{
  "success": true,
  "message": "Client invitation sent successfully",
  "data": {
    "contact_id": 150,
    "invitation_sent": true,
    "access_level": "standard",
    "invitation_url": "https://your-domain.com/client/invite/abc123def456",
    "expires_at": "2024-02-25T11:20:00Z"
  }
}
```

---

## Error Responses

### Common Error Codes

| Status Code | Error Type | Description |
|-------------|------------|-------------|
| `400` | Bad Request | Invalid request data or missing required fields |
| `401` | Unauthorized | Invalid or missing X-Secret-Key |
| `404` | Not Found | Contact not found |
| `409` | Conflict | Email already exists (for create/update) |
| `422` | Validation Error | Request data failed validation |
| `429` | Too Many Requests | Rate limit exceeded |

### Example Error Response

```json
{
  "success": false,
  "error": "Validation Error",
  "message": "The given data was invalid",
  "errors": {
    "email": ["The email field is required."],
    "name": ["The name field is required."]
  },
  "status_code": 422
}
```

---

## Response Schemas

### Contact Object

```json
{
  "id": "integer",
  "name": "string",
  "email": "string",
  "phone": "string|null",
  "company_id": "integer|null",
  "company_name": "string|null",
  "position": "string|null",
  "address": "string|null",
  "notes": "string|null",
  "status": "string",
  "tags": "array|null",
  "custom_fields": "object|null",
  "created_at": "string (ISO 8601)",
  "updated_at": "string (ISO 8601)"
}
```

### Pagination Meta Object

```json
{
  "current_page": "integer",
  "per_page": "integer", 
  "total": "integer",
  "total_pages": "integer"
}
```


<Callout type="info" emoji="💡">
  **Tip**: Use the search parameter in the GET /contact endpoint to quickly find contacts by name or email. You can also combine it with pagination for efficient searching through large contact lists.
</Callout>