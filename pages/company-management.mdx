# Company Management API

The Company Management API allows you to manage companies in your TaskIP CRM system. You can create, read, update, and delete companies, as well as perform bulk operations.

## Endpoints Overview

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/public-v1/company` | Get all companies |
| `POST` | `/api/public-v1/company` | Create a new company |
| `GET` | `/api/public-v1/company/{id}` | Get a specific company |
| `PUT` | `/api/public-v1/company/{id}` | Update a company |
| `DELETE` | `/api/public-v1/company/{id}` | Delete a company |
| `POST` | `/api/public-v1/company/bulk-delete` | Delete multiple companies |

---

## Get All Companies

Retrieve a list of all companies in your system.

```http
GET /api/public-v1/company
```

### Request Headers
```http
X-Secret-Key: your-secret-key-here
Content-Type: application/json
```

### Query Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `page` | integer | No | Page number for pagination (default: 1) |
| `limit` | integer | No | Number of companies per page (default: 50) |
| `search` | string | No | Search term for company name or domain |
| `sort` | string | No | Sort field (`name`, `domain`, `created_at`) |
| `order` | string | No | Sort order (`asc` or `desc`) |
| `industry` | string | No | Filter by industry |
| `status` | string | No | Filter by status (`active`, `inactive`) |

### Example Request

```bash
curl -X GET "https://public-api.taskip.net/api/public-v1/company?page=1&limit=20&industry=technology" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json"
```

### JavaScript Example
```javascript
const response = await fetch('https://public-api.taskip.net/api/public-v1/company?page=1&limit=20', {
  method: 'GET',
  headers: {
    'X-Secret-Key': 'your-secret-key-here',
    'Content-Type': 'application/json'
  }
});

const companies = await response.json();
```

### Example Response

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Acme Corporation",
      "domain": "acme.com",
      "email": "info@acme.com",
      "phone": "+1-555-0100",
      "address": "123 Business Street, New York, NY 10001",
      "industry": "Technology",
      "website": "https://www.acme.com",
      "employee_count": 150,
      "annual_revenue": 5000000,
      "status": "active",
      "description": "Leading technology solutions provider",
      "contact_count": 12,
      "project_count": 8,
      "created_at": "2024-01-10T09:30:00Z",
      "updated_at": "2024-01-20T14:15:00Z"
    },
    {
      "id": 2,
      "name": "Tech Solutions Inc",
      "domain": "techsolutions.com",
      "email": "hello@techsolutions.com",
      "phone": "+1-555-0101",
      "address": "456 Innovation Ave, San Francisco, CA 94105",
      "industry": "Software",
      "website": "https://www.techsolutions.com",
      "employee_count": 75,
      "annual_revenue": 2500000,
      "status": "active",
      "description": "Custom software development company",
      "contact_count": 8,
      "project_count": 15,
      "created_at": "2024-01-05T11:20:00Z",
      "updated_at": "2024-01-18T16:45:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 45,
    "total_pages": 3
  }
}
```

---

## Create a Company

Create a new company in your system.

```http
POST /api/public-v1/company
```

### Request Headers
```http
X-Secret-Key: your-secret-key-here
Content-Type: application/json
```

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Company name |
| `domain` | string | No | Company domain (e.g., "acme.com") |
| `email` | string | No | Primary company email |
| `phone` | string | No | Company phone number |
| `address` | string | No | Company address |
| `industry` | string | No | Company industry/sector |
| `website` | string | No | Company website URL |
| `employee_count` | integer | No | Number of employees |
| `annual_revenue` | decimal | No | Annual revenue in USD |
| `status` | string | No | Company status (`active`, `inactive`) |
| `description` | string | No | Company description |
| `tax_number` | string | No | Tax identification number |
| `billing_address` | string | No | Billing address if different from main |

### Example Request

```bash
curl -X POST "https://public-api.taskip.net/api/public-v1/company" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Green Energy Solutions",
    "domain": "greenenergy.com",
    "email": "contact@greenenergy.com",
    "phone": "+1-555-0102",
    "address": "789 Sustainability Blvd, Austin, TX 78701",
    "industry": "Renewable Energy",
    "website": "https://www.greenenergy.com",
    "employee_count": 200,
    "annual_revenue": 15000000,
    "status": "active",
    "description": "Renewable energy solutions for businesses"
  }'
```

### Python Example
```python
import requests

headers = {
    'X-Secret-Key': 'your-secret-key-here',
    'Content-Type': 'application/json'
}

company_data = {
    "name": "Green Energy Solutions",
    "domain": "greenenergy.com",
    "email": "contact@greenenergy.com",
    "phone": "+1-555-0102",
    "address": "789 Sustainability Blvd, Austin, TX 78701",
    "industry": "Renewable Energy",
    "website": "https://www.greenenergy.com",
    "employee_count": 200,
    "annual_revenue": 15000000,
    "status": "active",
    "description": "Renewable energy solutions for businesses"
}

response = requests.post(
    'https://public-api.taskip.net/api/public-v1/company',
    headers=headers,
    json=company_data
)

result = response.json()
```

### Example Response

```json
{
  "success": true,
  "message": "Company created successfully",
  "data": {
    "id": 46,
    "name": "Green Energy Solutions",
    "domain": "greenenergy.com",
    "email": "contact@greenenergy.com",
    "phone": "+1-555-0102",
    "address": "789 Sustainability Blvd, Austin, TX 78701",
    "industry": "Renewable Energy",
    "website": "https://www.greenenergy.com",
    "employee_count": 200,
    "annual_revenue": 15000000.00,
    "status": "active",
    "description": "Renewable energy solutions for businesses",
    "contact_count": 0,
    "project_count": 0,
    "created_at": "2024-01-25T10:30:00Z",
    "updated_at": "2024-01-25T10:30:00Z"
  }
}
```

---

## Get a Specific Company

Retrieve details of a specific company by ID.

```http
GET /api/public-v1/company/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Company ID |

### Example Request

```bash
curl -X GET "https://public-api.taskip.net/api/public-v1/company/46" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json"
```

### Example Response

```json
{
  "success": true,
  "data": {
    "id": 46,
    "name": "Green Energy Solutions",
    "domain": "greenenergy.com",
    "email": "contact@greenenergy.com",
    "phone": "+1-555-0102",
    "address": "789 Sustainability Blvd, Austin, TX 78701",
    "industry": "Renewable Energy",
    "website": "https://www.greenenergy.com",
    "employee_count": 200,
    "annual_revenue": 15000000.00,
    "status": "active",
    "description": "Renewable energy solutions for businesses",
    "tax_number": "12-3456789",
    "billing_address": "789 Sustainability Blvd, Austin, TX 78701",
    "contacts": [
      {
        "id": 201,
        "name": "Sarah Miller",
        "email": "sarah.miller@greenenergy.com",
        "position": "CEO"
      },
      {
        "id": 202,
        "name": "Mike Johnson",
        "email": "mike.johnson@greenenergy.com",
        "position": "CTO"
      }
    ],
    "projects": [
      {
        "id": 101,
        "name": "Solar Panel Installation",
        "status": "active"
      }
    ],
    "custom_fields": {
      "lead_source": "referral",
      "account_manager": "John Smith"
    },
    "contact_count": 2,
    "project_count": 1,
    "created_at": "2024-01-25T10:30:00Z",
    "updated_at": "2024-01-25T10:30:00Z"
  }
}
```

---

## Update a Company

Update an existing company's information.

```http
PUT /api/public-v1/company/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Company ID to update |

### Request Body
Same fields as create company. All fields are optional - only include fields you want to update.

### Example Request

```bash
curl -X PUT "https://public-api.taskip.net/api/public-v1/company/46" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "employee_count": 250,
    "annual_revenue": 18000000,
    "description": "Leading renewable energy solutions for businesses and municipalities"
  }'
```

### Example Response

```json
{
  "success": true,
  "message": "Company updated successfully",
  "data": {
    "id": 46,
    "name": "Green Energy Solutions",
    "domain": "greenenergy.com",
    "email": "contact@greenenergy.com",
    "phone": "+1-555-0102",
    "address": "789 Sustainability Blvd, Austin, TX 78701",
    "industry": "Renewable Energy",
    "website": "https://www.greenenergy.com",
    "employee_count": 250,
    "annual_revenue": 18000000.00,
    "status": "active",
    "description": "Leading renewable energy solutions for businesses and municipalities",
    "contact_count": 2,
    "project_count": 1,
    "created_at": "2024-01-25T10:30:00Z",
    "updated_at": "2024-01-26T09:45:00Z"
  }
}
```

---

## Delete a Company

Delete a specific company from your system.

```http
DELETE /api/public-v1/company/{id}
```

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `id` | integer | Yes | Company ID to delete |

import { Callout } from 'nextra-theme-docs'

<Callout type="warning" emoji="⚠️">
  **Warning**: Deleting a company will also remove all associated contacts and projects. This action cannot be undone.
</Callout>

### Example Request

```bash
curl -X DELETE "https://public-api.taskip.net/api/public-v1/company/46" \
  -H "X-Secret-Key: your-secret-key-here"
```

### Example Response

```json
{
  "success": true,
  "message": "Company deleted successfully",
  "data": {
    "deleted_company_id": 46,
    "associated_contacts_deleted": 2,
    "associated_projects_deleted": 1
  }
}
```

---

## Bulk Delete Companies

Delete multiple companies at once.

```http
POST /api/public-v1/company/bulk-delete
```

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `company_ids` | array | Yes | Array of company IDs to delete |
| `force_delete` | boolean | No | Force delete even with associated data (default: false) |

### Example Request

```bash
curl -X POST "https://public-api.taskip.net/api/public-v1/company/bulk-delete" \
  -H "X-Secret-Key: your-secret-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "company_ids": [44, 45, 47, 48],
    "force_delete": true
  }'
```

### JavaScript Example
```javascript
const bulkDeleteData = {
  company_ids: [44, 45, 47, 48],
  force_delete: true
};

const response = await fetch('https://public-api.taskip.net/api/public-v1/company/bulk-delete', {
  method: 'POST',
  headers: {
    'X-Secret-Key': 'your-secret-key-here',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(bulkDeleteData)
});

const result = await response.json();
```

### Example Response

```json
{
  "success": true,
  "message": "4 companies deleted successfully",
  "data": {
    "deleted_count": 4,
    "deleted_ids": [44, 45, 47, 48],
    "failed_ids": [],
    "total_contacts_deleted": 15,
    "total_projects_deleted": 8
  }
}
```

---

## Error Responses

### Common Error Codes

| Status Code | Error Type | Description |
|-------------|------------|-------------|
| `400` | Bad Request | Invalid request data or missing required fields |
| `401` | Unauthorized | Invalid or missing X-Secret-Key |
| `404` | Not Found | Company not found |
| `409` | Conflict | Company name or domain already exists |
| `422` | Validation Error | Request data failed validation |
| `429` | Too Many Requests | Rate limit exceeded |

### Example Error Response

```json
{
  "success": false,
  "error": "Validation Error",
  "message": "The given data was invalid",
  "errors": {
    "name": ["The name field is required."],
    "email": ["The email format is invalid."],
    "website": ["The website must be a valid URL."]
  },
  "status_code": 422
}
```

---

## Response Schemas

### Company Object

```json
{
  "id": "integer",
  "name": "string",
  "domain": "string|null",
  "email": "string|null",
  "phone": "string|null",
  "address": "string|null",
  "industry": "string|null",
  "website": "string|null",
  "employee_count": "integer|null",
  "annual_revenue": "decimal|null",
  "status": "string",
  "description": "string|null",
  "tax_number": "string|null",
  "billing_address": "string|null",
  "contacts": "array|null",
  "projects": "array|null",
  "custom_fields": "object|null",
  "contact_count": "integer",
  "project_count": "integer",
  "created_at": "string (ISO 8601)",
  "updated_at": "string (ISO 8601)"
}
```

### Contact Summary Object (in company details)

```json
{
  "id": "integer",
  "name": "string",
  "email": "string",
  "position": "string|null"
}
```

### Project Summary Object (in company details)

```json
{
  "id": "integer",
  "name": "string",
  "status": "string"
}
```

---

## Best Practices

### Company Creation
1. **Use consistent naming**: Keep company names consistent across your CRM
2. **Verify domains**: Ensure company domains are valid and unique
3. **Industry categorization**: Use standardized industry categories for better filtering
4. **Complete profiles**: Add as much company information as possible for better CRM insights

### Data Management
1. **Regular updates**: Keep company information current
2. **Bulk operations**: Use bulk delete for efficient data management
3. **Associated data**: Consider associated contacts and projects before deletion
4. **Search optimization**: Use descriptive names and domains for better searchability

<Callout type="info" emoji="💡">
  **Tip**: Use the industry filter in the GET /company endpoint to segment your companies by business sector. This is particularly useful for targeted marketing campaigns or industry-specific reporting.
</Callout>